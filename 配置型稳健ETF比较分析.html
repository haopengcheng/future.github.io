<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ETF 产品比较分析 (ETF Product Comparison)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=Noto+Sans+SC:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', 'Noto Sans SC', sans-serif;
            background-color: #0a0f1f; /* Dark tech background */
            color: #e0e0e0;
            overflow-x: hidden; /* Prevent horizontal scroll */
        }

        .font-noto-sans-sc {
            font-family: 'Noto Sans SC', sans-serif;
        }

        .hero-section {
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .hero-bg-shape {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 120vw; /* Large visual element */
            height: 120vw;
            max-width: 1500px;
            max-height: 1500px;
            background: radial-gradient(circle, rgba(23, 87, 209, 0.2) 0%, rgba(23, 87, 209, 0) 60%);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            z-index: 0;
            animation: pulse-bg 10s infinite ease-in-out;
        }

        @keyframes pulse-bg {
            0% { transform: translate(-50%, -50%) scale(0.9); opacity: 0.7; }
            50% { transform: translate(-50%, -50%) scale(1.1); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(0.9); opacity: 0.7; }
        }

        .typewriter-text {
            font-size: 5vw; /* Responsive large font */
            font-weight: 900;
            color: #ffffff;
            letter-spacing: 2px;
            border-right: .15em solid #00d1ff; /* Bright accent for cursor */
            white-space: nowrap;
            overflow: hidden;
            animation: typing 3.5s steps(40, end), blink-caret .75s step-end infinite;
            z-index: 1;
        }

        @media (max-width: 768px) {
            .typewriter-text {
                font-size: 8vw;
            }
        }
         @media (min-width: 1200px) {
            .typewriter-text {
                font-size: 70px; /* Max font size */
            }
        }


        @keyframes typing {
            from { width: 0 }
            to { width: 100% }
        }

        @keyframes blink-caret {
            from, to { border-color: transparent }
            50% { border-color: #00d1ff; }
        }

        .section-title {
            margin-bottom: 2rem; /* More space for titles */
            text-align: center;
        }

        .section-title .chinese-title {
            font-size: 2.8rem; /* Larger Chinese title */
            font-weight: 900;
            color: #ffffff;
            display: block;
        }

        .section-title .english-subtitle {
            font-size: 1rem;
            font-weight: 400;
            color: #00d1ff; /* Accent color */
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 0.25rem;
            display: block;
        }
        
        @media (max-width: 768px) {
            .section-title .chinese-title {
                font-size: 2rem;
            }
            .section-title .english-subtitle {
                font-size: 0.8rem;
            }
        }

        .content-section {
            padding: 4rem 2rem; /* Increased padding */
            max-width: 1200px;
            margin: 0 auto;
            opacity: 0;
            transform: translateY(50px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }

        .content-section.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .etf-card {
            background-color: rgba(21, 28, 58, 0.6); /* Semi-transparent card bg */
            border: 1px solid rgba(0, 209, 255, 0.3); /* Accent border */
            border-radius: 16px; /* More rounded corners */
            padding: 2rem; /* Increased padding */
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            backdrop-filter: blur(10px); /* Frosted glass effect */
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .etf-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 209, 255, 0.2); /* Brighter glow on hover */
        }

        .etf-card h3 {
            font-size: 1.8rem; /* Larger card title */
            font-weight: 700;
            color: #ffffff;
            margin-bottom: 0.5rem;
        }
        .etf-card .etf-code {
            font-size: 0.9rem;
            color: #00d1ff;
            margin-bottom: 1.5rem;
            display: block;
        }

        .metric {
            margin-bottom: 1rem;
        }
        .metric-label {
            font-size: 0.9rem;
            color: #a0a0a0;
            display: block;
            margin-bottom: 0.25rem;
        }
        .metric-value {
            font-size: 1.5rem; /* Larger metric value */
            font-weight: 700;
            color: #ffffff;
        }
        .metric-value.positive { color: #00ffaa; } /* Green for positive returns */
        .metric-value.negative { color: #ff4d4d; } /* Red for negative drawdown */

        .holdings-list {
            list-style: none;
            padding-left: 0;
            font-size: 0.9rem;
        }
        .holdings-list li {
            padding: 0.3rem 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .holdings-list li:last-child {
            border-bottom: none;
        }

        /* Chart Styling */
        .chart-container-wrapper {
            background-color: rgba(255,255,255,0.03);
            border-radius: 8px;
            padding: 1.5rem;
            margin-top: 1.5rem;
            border: 1px dashed rgba(0, 209, 255, 0.2);
        }
        .chart-title {
            text-align: center;
            color: #c0c0c0;
            font-size: 1rem;
            margin-bottom: 1rem;
        }
       
        /* Styling for Performance and Drawdown Chart Container */
        .performance-drawdown-chart-style {
            display: flex;
            flex-direction: row; /* Arrange ETF groups horizontally */
            justify-content: space-around; /* Distribute ETF groups */
            align-items: flex-end; /* Align bars at the bottom */
            height: 230px; /* Adjusted height to accommodate labels */
            padding: 10px 0;
            margin-top: 1rem;
            border-radius: 8px;
        }

        .etf-bar-group { /* Container for one ETF's return and drawdown bars */
            display: flex;
            justify-content: center; 
            align-items: flex-end;
            gap: 8px; /* Space between return and drawdown bar for the same ETF */
            flex-grow: 1; 
            position: relative; /* For label positioning */
            height: 100%; /* MODIFIED: Make group take full height of its parent */
        }

        .sector-bar-group-container { /* For sector allocation chart */
            display: flex;
            justify-content: space-around; 
            align-items: flex-start; /* Align tops of ETF sector blocks */
            height: auto; /* Auto height based on content */
            min-height: 250px; 
            padding: 10px 0;
            border-radius: 8px;
            margin-top: 1rem;
            gap: 15px; 
        }
        .etf-sector-bars { 
            display: flex;
            flex-direction: column; 
            align-items: center; 
            gap: 5px;
            width: calc(33% - 10px); /* Adjust width for 3 columns with gap */
        }
        .etf-sector-label {
            font-size: 0.85rem;
            color: #00d1ff;
            font-weight: bold;
            margin-bottom: 5px;
            text-align: center;
        }
        .sector-bar-item { 
            display: flex;
            align-items: center;
            width: 100%; 
            gap: 8px;
            margin-bottom: 3px;
        }
        .sector-bar {
            height: 18px; /* Slightly taller sector bars */
            opacity: 0.8;
            transition: width 0.5s ease-out, opacity 0.3s ease;
            border-radius: 3px;
            position: relative;
        }
        .sector-bar:hover {
            opacity: 1;
        }
        .sector-bar-label {
            font-size: 0.75rem;
            color: #b0b0b0;
            white-space: nowrap;
            flex-shrink: 0; /* Prevent label from shrinking */
        }
        .sector-bar-value {
            font-size: 0.75rem;
            color: #ffffff;
            font-weight: bold;
            margin-left: auto; 
        }


        .bar { /* General style for performance/drawdown bars */
            width: 30px; /* Slightly wider bars */
            opacity: 0.7;
            transition: height 0.5s ease-out, opacity 0.3s ease;
            position: relative;
            border-radius: 4px 4px 0 0;
        }
        .bar:hover {
            opacity: 1;
        }
        .bar-label { 
            position: absolute;
            bottom: -40px; /* Adjusted position for more space */
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.7em; /* Smaller font for potentially longer labels */
            color: #e0e0e0;
            white-space: nowrap;
            width: 120px; /* Increased width for labels */
            text-align: center;
            line-height: 1.2;
        }
        .bar-value { 
            position: absolute;
            top: -22px; /* Adjusted position */
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.8em;
            color: #ffffff;
            font-weight: bold;
        }
        .bar.positive { background-color: #00ffaa; }
        .bar.negative { background-color: #ff4d4d; }


        .line-divider {
            height: 2px;
            width: 100px;
            background: linear-gradient(90deg, rgba(0,209,255,0), rgba(0,209,255,1) 50%, rgba(0,209,255,0) 100%);
            margin: 3rem auto; 
            opacity: 0.7;
        }
        
        .footer {
            text-align: center;
            padding: 2rem;
            margin-top: 3rem; 
            font-size: 0.8rem;
            color: #a0a0a0;
            border-top: 1px solid rgba(255,255,255,0.1);
        }

        #backToTopBtn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background-color: rgba(0, 209, 255, 0.8); 
            color: white;
            border: none;
            border-radius: 50%; 
            width: 50px;
            height: 50px;
            font-size: 24px; 
            cursor: pointer;
            display: none; 
            z-index: 1000;
            transition: background-color 0.3s ease, opacity 0.3s ease, transform 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 209, 255, 0.3);
        }
        #backToTopBtn:hover {
            background-color: #00d1ff; 
            transform: scale(1.1);
        }

        .highlight-gradient {
            position: relative;
            padding: 0.5rem 1rem;
        }
        .highlight-gradient::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            border-radius: 8px;
            background: linear-gradient(to right, rgba(0, 209, 255, 0.3), rgba(0, 209, 255, 0.05));
            z-index: -1;
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        .content-section.visible .highlight-gradient::before {
            opacity: 1;
        }
        .chart-legend {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 15px; /* More space above legend */
            font-size: 0.8rem;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .legend-color-box {
            width: 12px;
            height: 12px;
            border-radius: 2px;
        }

    </style>
</head>
<body>

    <section class="hero-section">
        <div class="hero-bg-shape"></div>
        <h1 class="typewriter-text font-noto-sans-sc">ETF智能对比分析</h1>
        <p class="text-xl md:text-2xl text-gray-300 mt-8 z-10 animate-fadeInUp" style="animation-delay: 3.6s;">
            深入洞察 <span class="text-[#00d1ff] font-bold">关键指标</span>，优化您的 <span class="text-[#00d1ff] font-bold">投资决策</span>
            <br>Deep dive into <span class="text-[#00d1ff] font-bold">key metrics</span>, optimize your <span class="text-[#00d1ff] font-bold">investment decisions</span>.
        </p>
        <div class="absolute bottom-10 text-3xl text-[#00d1ff] animate-bounce z-10">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-10 h-10">
              <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 5.25 7.5 7.5 7.5-7.5M4.5 12l7.5 7.5 7.5-7.5" />
            </svg>          
        </div>
    </section>

    <section class="content-section">
        <div class="section-title">
            <span class="chinese-title font-noto-sans-sc">产品总览</span>
            <span class="english-subtitle">ETF Overview</span>
        </div>
        <p class="text-lg text-center text-gray-300 max-w-3xl mx-auto">
            本页面旨在对三款热门ETF产品：<strong class="text-[#00d1ff]">159399 (现金流ETF)</strong>、<strong class="text-[#00d1ff]">159201 (稳健增长ETF)</strong> 及 <strong class="text-[#00d1ff]">513530 (全球视野ETF)</strong> 进行多维度对比分析，涵盖持仓、规模、收益与风险控制，助您做出更明智的投资选择。
        </p>
        <div class="line-divider"></div>
    </section>

    <section class="content-section">
        <div class="section-title">
            <span class="chinese-title font-noto-sans-sc">核心指标对比</span>
            <span class="english-subtitle">Key Metrics Comparison</span>
        </div>
        <div class="grid md:grid-cols-3 gap-8">
            <div class="etf-card">
                <div>
                    <h3 class="font-noto-sans-sc">现金流ETF</h3>
                    <span class="etf-code">CODE: 159399</span>
                    <div class="metric">
                        <span class="metric-label">基金规模 (AUM)</span>
                        <span class="metric-value">¥120 亿</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">近一年收益率 (1Y Return)</span>
                        <span class="metric-value positive">+16.00%</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">最大回撤 (Max Drawdown)</span>
                        <span class="metric-value negative">-7.00%</span>
                    </div>
                    <div class="mt-4">
                        <span class="metric-label">主要持仓 (Top Holdings):</span>
                        <ul class="holdings-list">
                            <li>高现金流消费 (High Cash Flow Consumer): 20%</li>
                            <li>稳定派息工业 (Stable Dividend Industrial): 18%</li>
                            <li>优质公用事业 (Quality Utility): 15%</li>
                            <li>医疗保健现金牛 (Healthcare Cash Cow): 12%</li>
                            <li>精选金融服务 (Select Financial Services): 10%</li>
                        </ul>
                    </div>
                </div>
                <div class="chart-container-wrapper mt-6">
                    <p class="chart-title">持仓分布图 (Holdings)</p>
                     <svg viewBox="0 0 100 100" class="w-32 h-32 mx-auto mt-2">
                        <circle cx="50" cy="50" r="40" fill="transparent" stroke="#00d1ff" stroke-width="10" stroke-dasharray="125.66 251.32" stroke-dashoffset="0"></circle> 
                        <circle cx="50" cy="50" r="40" fill="transparent" stroke="#33ffcc" stroke-width="10" stroke-dasharray="113.094 251.32" stroke-dashoffset="-125.66"></circle> 
                        <circle cx="50" cy="50" r="40" fill="transparent" stroke="#66ccff" stroke-width="10" stroke-dasharray="94.245 251.32" stroke-dashoffset="-238.754"></circle> 
                        <text x="50" y="55" text-anchor="middle" fill="#e0e0e0" font-size="10">现金流</text>
                    </svg>
                </div>
            </div>

            <div class="etf-card">
                <div>
                    <h3 class="font-noto-sans-sc">稳健增长ETF</h3>
                    <span class="etf-code">CODE: 159201</span>
                    <div class="metric">
                        <span class="metric-label">基金规模 (AUM)</span>
                        <span class="metric-value">¥250 亿</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">近一年收益率 (1Y Return)</span>
                        <span class="metric-value positive">+10.00%</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">最大回撤 (Max Drawdown)</span>
                        <span class="metric-value negative">-5.00%</span>
                    </div>
                     <div class="mt-4">
                        <span class="metric-label">主要持仓 (Top Holdings):</span>
                        <ul class="holdings-list">
                            <li>大型银行 (Major Bank): 18%</li>
                            <li>消费品龙头 (Leading Consumer Goods): 16%</li>
                            <li>医疗保健巨头 (Healthcare Giant): 14%</li>
                            <li>公用事业 (Utility Provider): 11%</li>
                            <li>房地产信托 (REIT): 10%</li>
                        </ul>
                    </div>
                </div>
                <div class="chart-container-wrapper mt-6">
                    <p class="chart-title">持仓分布图 (Holdings)</p>
                     <svg viewBox="0 0 100 100" class="w-32 h-32 mx-auto mt-2">
                        <circle cx="50" cy="50" r="40" fill="transparent" stroke="#00d1ff" stroke-width="10" stroke-dasharray="113.094 251.32" stroke-dashoffset="0"></circle> 
                        <circle cx="50" cy="50" r="40" fill="transparent" stroke="#33ffcc" stroke-width="10" stroke-dasharray="100.528 251.32" stroke-dashoffset="-113.094"></circle> 
                        <circle cx="50" cy="50" r="40" fill="transparent" stroke="#66ccff" stroke-width="10" stroke-dasharray="87.962 251.32" stroke-dashoffset="-213.622"></circle> 
                        <text x="50" y="55" text-anchor="middle" fill="#e0e0e0" font-size="10">稳健</text>
                    </svg>
                </div>
            </div>

            <div class="etf-card">
                <div>
                    <h3 class="font-noto-sans-sc">全球视野ETF</h3>
                    <span class="etf-code">CODE: 513530</span>
                    <div class="metric">
                        <span class="metric-label">基金规模 (AUM)</span>
                        <span class="metric-value">¥100 亿</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">近一年收益率 (1Y Return)</span>
                        <span class="metric-value positive">+18.00%</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">最大回撤 (Max Drawdown)</span>
                        <span class="metric-value negative">-8.00%</span>
                    </div>
                     <div class="mt-4">
                        <span class="metric-label">主要持仓 (Top Holdings):</span>
                        <ul class="holdings-list">
                            <li>美国科技巨头 (US Tech Giant): 15%</li>
                            <li>欧洲工业 (European Industrial): 12%</li>
                            <li>日本制造 (Japanese Manufacturer): 10%</li>
                            <li>新兴市场消费 (Emerging Market Consumer): 9%</li>
                            <li>全球医疗 (Global Healthcare): 8%</li>
                        </ul>
                    </div>
                </div>
                <div class="chart-container-wrapper mt-6">
                    <p class="chart-title">持仓分布图 (Holdings)</p>
                     <svg viewBox="0 0 100 100" class="w-32 h-32 mx-auto mt-2">
                        <circle cx="50" cy="50" r="40" fill="transparent" stroke="#00d1ff" stroke-width="10" stroke-dasharray="94.245 251.32" stroke-dashoffset="0"></circle> 
                        <circle cx="50" cy="50" r="40" fill="transparent" stroke="#33ffcc" stroke-width="10" stroke-dasharray="75.396 251.32" stroke-dashoffset="-94.245"></circle> 
                        <circle cx="50" cy="50" r="40" fill="transparent" stroke="#66ccff" stroke-width="10" stroke-dasharray="62.83 251.32" stroke-dashoffset="-169.641"></circle> 
                        <text x="50" y="55" text-anchor="middle" fill="#e0e0e0" font-size="10">全球</text>
                    </svg>
                </div>
            </div>
        </div>
    </section>

    <section class="content-section">
        <div class="section-title">
            <span class="chinese-title font-noto-sans-sc">深度剖析</span>
            <span class="english-subtitle">In-depth Analysis</span>
        </div>
        
        <div class="highlight-gradient p-6 rounded-lg mb-12 bg-slate-800/30">
            <h4 class="text-2xl font-bold text-[#00d1ff] mb-3 font-noto-sans-sc">持仓组成 <span class="text-sm text-gray-400 uppercase">Holdings Breakdown</span></h4>
            <p class="text-gray-300 mb-4">
                现金流ETF (159399) 专注于投资那些具有强劲且持续自由现金流能力的公司，通常这些公司财务状况较为健康，可能具备持续分红或回购潜力。
                稳健增长ETF (159201) 则分散投资于金融、消费、医疗等传统蓝筹领域，追求更平稳的资本增值。
                全球视野ETF (513530) 提供跨国界、跨市场的多元化配置，有助于分散单一市场风险，捕捉全球增长机会。
            </p>
            <div class="chart-container-wrapper">
                <p class="chart-title">模拟持仓行业对比图 (Sector Allocation Comparison)</p>
                <div class="sector-bar-group-container" id="sectorAllocationChart">
                    </div>
            </div>
        </div>

        <div class="highlight-gradient p-6 rounded-lg mb-12 bg-slate-800/30">
            <h4 class="text-2xl font-bold text-[#00d1ff] mb-3 font-noto-sans-sc">业绩与回撤 <span class="text-sm text-gray-400 uppercase">Performance & Drawdown</span></h4>
            <p class="text-gray-300 mb-4">
                从近一年模拟数据看，现金流ETF (159399) 展现出较好的收益性，同时回撤控制也相对稳健，体现了其投资标的财务质量的优势。
                稳健增长ETF (159201) 收益率较为温和，回撤控制表现最佳，适合风险厌恶型投资者。
                全球视野ETF (513530) 收益与风险水平均处于中等，体现了全球分散配置的平衡效果。
            </p>
            <div class="chart-container-wrapper">
                <p class="chart-title">业绩与最大回撤对比 (Return & Max Drawdown)</p>
                <div class="performance-drawdown-chart-style" id="performanceDrawdownChart">
                    </div>
                <div class="chart-legend">
                    <div class="legend-item">
                        <div class="legend-color-box" style="background-color: #00ffaa;"></div>
                        <span>收益率 (Return)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color-box" style="background-color: #ff4d4d;"></div>
                        <span>最大回撤 (Max Drawdown)</span>
                    </div>
                </div>
            </div>

        </div>
        <div class="line-divider"></div>
    </section>

    <section class="content-section">
        <div class="section-title">
            <span class="chinese-title font-noto-sans-sc">投资建议</span>
            <span class="english-subtitle">Investment Suggestions</span>
        </div>
        <div class="bg-slate-800/50 border border-sky-500/30 p-8 rounded-xl shadow-2xl">
            <ul class="list-disc list-inside space-y-4 text-gray-300 text-lg">
                <li>
                    <strong class="text-[#00d1ff]">注重企业财务质量和持续现金流的投资者：</strong>可关注 <strong class="text-white">现金流ETF (159399)</strong>。这类ETF通常投资于基本面扎实、能够持续产生自由现金流的公司，可能带来相对稳健的回报。
                </li>
                <li>
                    <strong class="text-[#00d1ff]">偏好稳健、注重风险控制的投资者：</strong><strong class="text-white">稳健增长ETF (159201)</strong> 或是更佳选择。其持仓多为成熟行业龙头，历史回撤较小，适合作为核心配置。
                </li>
                <li>
                    <strong class="text-[#00d1ff]">希望分散风险、捕捉全球机遇的投资者：</strong>可以考虑 <strong class="text-white">全球视野ETF (513530)</strong>。通过投资于不同国家和地区的资产，能够有效降低单一市场依赖，分享全球经济发展红利。
                </li>
                <li>
                    <strong class="text-[#00d1ff]">组合配置建议：</strong>投资者也可根据自身风险偏好和投资目标，将不同特点的ETF进行组合。例如，以现金流ETF或稳健增长ETF为核心，适当配置全球视野ETF以增加多元化。
                </li>
            </ul>
            <p class="mt-6 text-sm text-amber-400/80">
                重要提示：以上建议仅基于模拟数据和一般市场情况分析，不构成任何具体的投资操作指引。投资有风险，入市需谨慎。请在充分了解产品特性和自身风险承受能力后做出决策。
            </p>
        </div>
    </section>

    <footer class="footer">
        <p>友情提示：本页内容仅作参考。</p>
        <p>&copy; 2025 ETF Analysis Platform. All rights reserved.</p>
    </footer>

    <button id="backToTopBtn" title="返回顶部 (Back to Top)">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6 mx-auto">
          <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 10.5 12 3m0 0 7.5 7.5M12 3v18" />
        </svg>
    </button>

    <script>
        // Scroll-triggered Animations
        const sections = document.querySelectorAll('.content-section');
        const observerOptions = {
            root: null, 
            rootMargin: '0px',
            threshold: 0.1 
        };

        const observer = new IntersectionObserver((entries, obs) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                    // obs.unobserve(entry.target); // Optional: unobserve after first animation
                }
            });
        }, observerOptions);

        sections.forEach(section => {
            observer.observe(section);
        });

        // Back to Top Button
        const backToTopBtn = document.getElementById('backToTopBtn');
        window.onscroll = function() {
            if (document.body.scrollTop > 100 || document.documentElement.scrollTop > 100) {
                if (backToTopBtn.style.display !== "block") { // Avoid flicker
                    backToTopBtn.style.display = "block";
                    requestAnimationFrame(() => { backToTopBtn.style.opacity = "1"; });
                }
            } else {
                if (backToTopBtn.style.opacity === "1") { // Avoid flicker
                    backToTopBtn.style.opacity = "0";
                    setTimeout(() => { 
                        if(!(document.body.scrollTop > 100 || document.documentElement.scrollTop > 100)) {
                            backToTopBtn.style.display = "none"; 
                        }
                    }, 300);
                }
            }
        };
        backToTopBtn.onclick = function() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        };

        // --- Performance & Drawdown Chart ---
        const performanceDrawdownData = [
            { etf: '159399', name: '现金流ETF', returnValue: 16, drawdownValue: -7 },
            { etf: '159201', name: '稳健增长ETF', returnValue: 10, drawdownValue: -5 },
            { etf: '513530', name: '全球视野ETF', returnValue: 18, drawdownValue: -8 }
        ];

        const performanceDrawdownChartContainer = document.getElementById('performanceDrawdownChart');
        if (performanceDrawdownChartContainer) {
            const allValues = performanceDrawdownData.flatMap(d => [Math.abs(d.returnValue), Math.abs(d.drawdownValue)]);
            const maxValue = Math.max(...allValues, 20); // Ensure a minimum scale height, e.g., 20%

            performanceDrawdownData.forEach(data => {
                const group = document.createElement('div');
                group.classList.add('etf-bar-group');

                // Return Bar
                const returnBar = document.createElement('div');
                returnBar.classList.add('bar', 'positive');
                // Ensure height is not negative or NaN if data is unexpected
                const returnHeight = Math.max(0, (Math.abs(data.returnValue) / maxValue) * 100); 
                
                const returnValueDisplay = document.createElement('span');
                returnValueDisplay.classList.add('bar-value');
                returnValueDisplay.textContent = `${data.returnValue.toFixed(1)}%`;
                returnBar.appendChild(returnValueDisplay);

                const returnLabel = document.createElement('span');
                returnLabel.classList.add('bar-label');
                returnLabel.innerHTML = `${data.name}<br>(${data.etf} 收益)`;
                returnBar.appendChild(returnLabel);
                
                group.appendChild(returnBar);

                // Drawdown Bar
                const drawdownBar = document.createElement('div');
                drawdownBar.classList.add('bar', 'negative');
                // Ensure height is not negative or NaN
                const drawdownHeight = Math.max(0, (Math.abs(data.drawdownValue) / maxValue) * 100);

                const drawdownValueDisplay = document.createElement('span');
                drawdownValueDisplay.classList.add('bar-value');
                drawdownValueDisplay.textContent = `${data.drawdownValue.toFixed(1)}%`;
                drawdownBar.appendChild(drawdownValueDisplay);

                group.appendChild(drawdownBar);
                performanceDrawdownChartContainer.appendChild(group);
                
                // Animate bars
                requestAnimationFrame(() => {
                    setTimeout(() => {
                         returnBar.style.height = `${returnHeight}%`;
                         drawdownBar.style.height = `${drawdownHeight}%`;
                    }, 100); // Small delay for CSS transition to catch up
                });
            });
        }

        // --- Sector Allocation Chart ---
        const sectorAllocationData = [
            { 
                etf: '159399', 
                name: '现金流ETF',
                sectors: [
                    { name: '高现金流消费', value: 20, color: '#22c55e' }, 
                    { name: '稳定派息工业', value: 18, color: '#3b82f6' }, 
                    { name: '优质公用事业', value: 15, color: '#f97316' }, 
                    { name: '医疗保健现金牛', value: 12, color: '#8b5cf6' }, 
                    { name: '精选金融服务', value: 10, color: '#ec4899'}, 
                    { name: '其他', value: 25, color: '#71717a' }      
                ]
            },
            { 
                etf: '159201', 
                name: '稳健增长ETF',
                sectors: [
                    { name: '大型银行', value: 18, color: '#3b82f6' }, 
                    { name: '消费品龙头', value: 16, color: '#22c55e' },
                    { name: '医疗保健巨头', value: 14, color: '#8b5cf6' },
                    { name: '公用事业', value: 11, color: '#f97316' },
                    { name: '房地产信托', value: 10, color: '#14b8a6'}, 
                    { name: '其他', value: 31, color: '#71717a' }
                ]
            },
            { 
                etf: '513530', 
                name: '全球视野ETF',
                sectors: [
                    { name: '美国科技', value: 15, color: '#6366f1' }, 
                    { name: '欧洲工业', value: 12, color: '#3b82f6' },
                    { name: '日本制造', value: 10, color: '#ef4444' }, 
                    { name: '新兴市场消费', value: 9, color: '#f59e0b' }, 
                    { name: '全球医疗', value: 8, color: '#8b5cf6' },
                    { name: '其他', value: 46, color: '#71717a' }
                ]
            }
        ];

        const sectorChartContainer = document.getElementById('sectorAllocationChart');
        if (sectorChartContainer) {
            const maxSectorValue = 100; // Assuming sector values are percentages

            sectorAllocationData.forEach((etfData, etfIndex) => {
                const etfGroupDiv = document.createElement('div');
                etfGroupDiv.classList.add('etf-sector-bars');
                
                const etfNameLabel = document.createElement('div');
                etfNameLabel.classList.add('etf-sector-label');
                etfNameLabel.textContent = `${etfData.name} (${etfData.etf})`;
                etfGroupDiv.appendChild(etfNameLabel);

                etfData.sectors.forEach((sector) => {
                    const itemDiv = document.createElement('div');
                    itemDiv.classList.add('sector-bar-item');

                    const barDiv = document.createElement('div');
                    barDiv.classList.add('sector-bar');
                    barDiv.style.backgroundColor = sector.color; 
                    
                    const barWidth = Math.max(0, (sector.value / maxSectorValue) * 100); // Ensure width is not negative

                    const labelSpan = document.createElement('span');
                    labelSpan.classList.add('sector-bar-label');
                    labelSpan.textContent = sector.name;
                    
                    const valueSpan = document.createElement('span');
                    valueSpan.classList.add('sector-bar-value');
                    valueSpan.textContent = `${sector.value}%`;

                    itemDiv.appendChild(barDiv); 
                    itemDiv.appendChild(labelSpan);
                    itemDiv.appendChild(valueSpan);
                    etfGroupDiv.appendChild(itemDiv);

                    requestAnimationFrame(() => {
                        setTimeout(() => {
                            barDiv.style.width = `${barWidth}%`;
                        }, 100 + etfIndex * 50); 
                    });
                });
                sectorChartContainer.appendChild(etfGroupDiv);
            });
        }


        // Add fadeInUp animation class for elements that need it after typewriter
        const styleSheet = document.createElement("style");
        styleSheet.type = "text/css";
        styleSheet.innerText = `
            @keyframes fadeInUp {
                from { opacity: 0; transform: translateY(20px); }
                to { opacity: 1; transform: translateY(0); }
            }
            .animate-fadeInUp { animation: fadeInUp 1s ease-out forwards; }
        `;
        document.head.appendChild(styleSheet);

    </script>
</body>
</html>
